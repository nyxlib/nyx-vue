<script setup>
/*--------------------------------------------------------------------------------------------------------------------*/

import {ref, onMounted} from 'vue';

import Chart from 'chart.js/auto';

/*--------------------------------------------------------------------------------------------------------------------*/
/* VARIABLES                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const props = defineProps({
    type: {
        type: String,
        default: 'scatter',
        validator: (value) => ['scatter'].includes(value),
    },
    title: {
        type: String,
        default: '',
    },
    showLegend: {
        type: Boolean,
        default: false,
    },
    metricNames: {
        type: Array,
        default: [],
    },
    labelset: {
        type: Array,
        default: [],
    },
    dataset: {
        type: Array,
        default: [],
    },
});

/*--------------------------------------------------------------------------------------------------------------------*/

const canvas = ref(null);

let chart = null;

/*--------------------------------------------------------------------------------------------------------------------*/
/* INITIALIZATION                                                                                                     */
/*--------------------------------------------------------------------------------------------------------------------*/

onMounted(() => {

    /*----------------------------------------------------------------------------------------------------------------*/

    const labels = [1, 2, 3, 4];

    /*----------------------------------------------------------------------------------------------------------------*/

    const datasets = props.metricNames.map((metricsName) => {

        return {
            label: metricsName,
            data: [10, 20, 30, 40],
        };
    });

    /*----------------------------------------------------------------------------------------------------------------*/

    chart = new Chart(canvas.value, {
        type: props.type,
        data: {
            labels: labels,
            datasets: datasets,
        },
        options: {
            animation: {
                duration: 0,
            },
            responsive: true,
            plugins: {
                title: {
                    display: !!props.title,
                    text: props.title,
                },
                legend: {
                    display: props.showLegend,
                },
            },
        },
    });

    /*----------------------------------------------------------------------------------------------------------------*/
});

/*--------------------------------------------------------------------------------------------------------------------*/
</script>

<template>

    <!-- *********************************************************************************************************** -->

    <canvas class="h-100 w-100" ref="canvas"></canvas>

    <!-- *********************************************************************************************************** -->

</template>
