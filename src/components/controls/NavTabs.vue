<script setup>
/*--------------------------------------------------------------------------------------------------------------------*/

import {ref, provide} from 'vue';

/*--------------------------------------------------------------------------------------------------------------------*/
/* VARIABLES                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const props = defineProps({
    margin: {
        type: String,
        default: 'mb-4',
    },
});

/*--------------------------------------------------------------------------------------------------------------------*/

const tabs = ref([]);

/*--------------------------------------------------------------------------------------------------------------------*/
/* FUNCTIONS                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

provide('addTab', (tabId, tabName, tabIcon) => {

    tabs.value.push({
        tabId: tabId,
        tabName: tabName,
        tabIcon: tabIcon,
    });

   return tabs.value.length === 1;
});

/*--------------------------------------------------------------------------------------------------------------------*/
</script>

<template>

    <!-- *********************************************************************************************************** -->
    <!-- NAV TABS                                                                                                    -->
    <!-- *********************************************************************************************************** -->

    <ul :class="['nav', 'nav-tabs', margin]" role="tablist">

        <li class="nav-item" role="presentation" v-for="(tab, idx) in tabs" :key="idx">

            <button :class="['nav-link', 'px-3', 'py-2', {'active': idx === 0}]" type="button" data-bs-toggle="tab" :data-bs-target="`#${tab.tabId}`" role="tab">
                <i :class="['bi', `bi-${tab.tabIcon}`]" v-if="tab.tabIcon"></i>
                {{ tab.tabName }}
            </button>

        </li>

    </ul>

    <!-- *********************************************************************************************************** -->
    <!-- TABS CONTENT                                                                                                -->
    <!-- *********************************************************************************************************** -->

    <div class="tab-content flex-grow-1">

        <slot></slot>

    </div>

    <!-- *********************************************************************************************************** -->

</template>
