<script setup>
/*--------------------------------------------------------------------------------------------------------------------*/

import {ref, inject, onMounted} from 'vue';

import * as uuid from 'uuid';

/*--------------------------------------------------------------------------------------------------------------------*/
/* VARIABLES                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const addTab = inject('addTab');

/*--------------------------------------------------------------------------------------------------------------------*/

const props = defineProps({
    title: {
        type: String,
        required: true,
    },
    icon: {
        type: String,
        default: ''
    },
});

/*--------------------------------------------------------------------------------------------------------------------*/

const emit = defineEmits([
    'show', 'shown',
    'hide', 'hidden',
]);

/*--------------------------------------------------------------------------------------------------------------------*/

const bntRef = ref(null);

const isFirst = ref(false);

/*--------------------------------------------------------------------------------------------------------------------*/

const tabId = `indi_tab_${uuid.v4().substring(0, 8)}`;

/*--------------------------------------------------------------------------------------------------------------------*/
/* FUNCTIONS                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const onShow = (e) => {

    emit('shown', e);
};

const onShown = (e) => {

    emit('shown', e);
};

const onHide = (e) => {

    emit('hidden', e);
};

const onHidden = (e) => {

    emit('hidden', e);
};

/*--------------------------------------------------------------------------------------------------------------------*/
/* INITIALIZATION                                                                                                     */
/*--------------------------------------------------------------------------------------------------------------------*/

onMounted(() => {

    isFirst.value = addTab(tabId, props.title, props.icon, onShow, onShown, onHide, onHidden);
});

/*--------------------------------------------------------------------------------------------------------------------*/
</script>

<template>

    <!-- *********************************************************************************************************** -->

    <div :class="['tab-pane', 'h-100', {'show': isFirst, 'active': isFirst}]" :id="tabId">

        <slot></slot>

    </div>

    <!-- *********************************************************************************************************** -->

</template>
