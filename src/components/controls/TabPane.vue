<script setup>
/*--------------------------------------------------------------------------------------------------------------------*/

import {ref, inject, onMounted} from 'vue';

import {v4} from 'uuid';

/*--------------------------------------------------------------------------------------------------------------------*/
/* VARIABLES                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const addTab = inject('addTab');

/*--------------------------------------------------------------------------------------------------------------------*/

const props = defineProps({
    title: {
        type: String,
        required: true,
    },
    icon: {
        type: String,
        default: ''
    },
});

/*--------------------------------------------------------------------------------------------------------------------*/

const emit = defineEmits([
    'show', 'shown',
    'hide', 'hidden',
]);

/*--------------------------------------------------------------------------------------------------------------------*/

const bntRef = ref(null);

const firstTab = ref(false);

/*--------------------------------------------------------------------------------------------------------------------*/

const tabId = `indi_tab_${v4().substring(0, 8)}`;

/*--------------------------------------------------------------------------------------------------------------------*/
/* FUNCTIONS                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const onShow = (e) => {

    emit('shown', e);
};

const onShown = (e) => {

    emit('shown', e);
};

const onHide = (e) => {

    emit('hidden', e);
};

const onHidden = (e) => {

    emit('hidden', e);
};

/*--------------------------------------------------------------------------------------------------------------------*/
/* INITIALIZATION                                                                                                     */
/*--------------------------------------------------------------------------------------------------------------------*/

onMounted(() => {

    firstTab.value = addTab(tabId, props.title, props.icon, onShow, onShown, onHide, onHidden);
});

/*--------------------------------------------------------------------------------------------------------------------*/
</script>

<template>

    <!-- *********************************************************************************************************** -->

    <div :class="['tab-pane', 'h-100', {'show': firstTab, 'active': firstTab}]" :id="tabId">

        <slot></slot>

    </div>

    <!-- *********************************************************************************************************** -->

</template>
