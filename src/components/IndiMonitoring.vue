<script setup>
/*--------------------------------------------------------------------------------------------------------------------*/

import { inject, onMounted } from 'vue';

import { GridStack } from 'gridstack';
import { Tooltip } from 'bootstrap';

/*--------------------------------------------------------------------------------------------------------------------*/
/* VARIABLES                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const indi = inject('indi');

/*--------------------------------------------------------------------------------------------------------------------*/

let grid = null;

/*--------------------------------------------------------------------------------------------------------------------*/
/* FUNCTIONS                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const addWidget = () => {

    grid.addWidget({w: 2, content: 'item'});
};

/*--------------------------------------------------------------------------------------------------------------------*/

onMounted(() => {

    new Tooltip(document.body, {
        selector: '[data-bs-toggle="tooltip"]'
    })

    grid = GridStack.init({
        removable: '#AAE7F472'
    });
});

/*--------------------------------------------------------------------------------------------------------------------*/
</script>

<template>

    <!-- *********************************************************************************************************** -->

    <div class="grid-stack h-100 w-100"></div>

    <!-- *********************************************************************************************************** -->

    <div class="position-absolute" style="right: 1rem; bottom: 1rem;">

        <button class="btn btn-primary ms-0" type="button" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Add a new widget" @click="addWidget">
            <i class="bi bi-plus-lg"></i>
        </button>

        <button class="btn btn-danger ms-1" type="button" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Drop here to remove" id="AAE7F472">
            <i class="bi bi-trash2"></i>
        </button>

    </div>

    <!-- *********************************************************************************************************** -->

</template>

<style>
/*--------------------------------------------------------------------------------------------------------------------*/

@import "gridstack/dist/gridstack.css";

/*--------------------------------------------------------------------------------------------------------------------*/

.grid-stack > .grid-stack-item > .grid-stack-item-content {

    background-color: rgba(0, 0, 0, 2.5%) !important;
}

[data-bs-theme=dark] {

    .grid-stack > .grid-stack-item > .grid-stack-item-content {

        background-color: rgba(255, 255, 255, 10%) !important;
    }
}

/*--------------------------------------------------------------------------------------------------------------------*/
</style>
